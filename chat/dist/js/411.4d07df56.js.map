{"version":3,"file":"js/411.4d07df56.js","mappings":"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","sources":["webpack://chat-demo/./src/views/newGroupChat/NewGroupChatPage.vue","webpack://chat-demo/src/views/newGroupChat/NewGroupChatPage.vue","webpack://chat-demo/./src/views/newGroupChat/NewGroupChatPage.vue?c89d","webpack://chat-demo/./src/views/newGroupChat/NewGroupChatPage.vue?bf6a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"new-group-chat-page\"}},[_c('h3',[_c('van-icon',{attrs:{\"name\":\"arrow-left\",\"color\":\"rgb(107, 107, 107)\"},on:{\"click\":_vm.routerGoBack}}),_c('span',{staticClass:\"set\"},[_c('span',[_vm._v(_vm._s(_vm.groupName))]),_c('img',{attrs:{\"src\":require(\"../../assets/image/more.png\")},on:{\"click\":function($event){return _vm.$router.push('/groupmessage')}}})])],1),(_vm.isKnowAnnouncement)?_c('p',{staticClass:\"announcement\"},[_c('span',[_vm._v(_vm._s(_vm.announcement))]),_c('span',{on:{\"click\":_vm.knowAnnouncement}},[_vm._v(\"未读\")])]):_vm._e(),_c('main',{on:{\"click\":_vm.handle}},[_c('div',{staticClass:\"content\"},[_c('p',[_vm._v(_vm._s(_vm.initCreateTime))]),_c('p',[_vm._v(\"你邀请了\"+_vm._s(_vm.promptWords)+\"加入了群聊\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textAllMessagesArr !== [] ? true : false),expression:\"textAllMessagesArr !== [] ? true : false\"}],staticClass:\"messages\"},_vm._l((_vm.textAllMessagesArr),function(item,index){return _c('div',{key:index},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.sendPeople == _vm.userId),expression:\"item.sendPeople == userId\"}],staticClass:\"right\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.sendPeopleImg !== undefined),expression:\"item.sendPeopleImg !== undefined\"}],attrs:{\"src\":item.sendPeopleImg}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.sendPeopleImg == undefined),expression:\"item.sendPeopleImg == undefined\"}],attrs:{\"src\":require(\"../../assets/image/images/default_hd_avatar.png\")}}),_c('span',[_vm._v(_vm._s(item.text))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.sendPeople !== _vm.userId),expression:\"item.sendPeople !== userId\"}],staticClass:\"left\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.sendPeopleImg !== undefined),expression:\"item.sendPeopleImg !== undefined\"}],attrs:{\"src\":item.sendPeopleImg}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.sendPeopleImg == undefined),expression:\"item.sendPeopleImg == undefined\"}],attrs:{\"src\":require(\"../../assets/image/images/default_hd_avatar.png\")}}),_c('span',[_vm._v(_vm._s(item.text))])])])}),0)]),_c('footer',[_c('div',{staticClass:\"choose\"},[_vm._m(0),_c('div',{staticClass:\"container\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputValue),expression:\"inputValue\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.inputValue)},on:{\"input\":function($event){if($event.target.composing)return;_vm.inputValue=$event.target.value}}})]),_c('div',{staticClass:\"right\"},[_vm._m(1),(!_vm.inputValue)?_c('span',{on:{\"click\":_vm.handleClick}},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/more.png\")}})]):_c('button',{on:{\"click\":_vm.sendOneTextMessage}},[_vm._v(\"发送\")])])]),_c('transition',{attrs:{\"name\":\"slide\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showFunctionList),expression:\"showFunctionList\"}],staticClass:\"list\"},[_c('div',{staticClass:\"item\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/photography.png\")}}),_c('span',[_vm._v(\"相册\")])]),_c('div',{staticClass:\"item\",on:{\"click\":_vm.takePhoto}},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/takephoto.png\")}}),_c('span',[_vm._v(\"拍摄\")])]),_c('div',{staticClass:\"item\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/phone.png\")}}),_c('span',[_vm._v(\"视频通话\")])]),_c('div',{staticClass:\"item\",on:{\"click\":_vm.map}},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/place.png\")}}),_c('span',[_vm._v(\"位置\")])]),_c('div',{staticClass:\"item\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/redpack.png\")}}),_c('span',[_vm._v(\"红包\")])]),_c('div',{staticClass:\"item\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/money.png\")}}),_c('span',[_vm._v(\"转账\")])]),_c('div',{staticClass:\"item\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/talk.png\")}}),_c('span',[_vm._v(\"语音输入\")])]),_c('div',{staticClass:\"item\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/collect.png\")}}),_c('span',[_vm._v(\"我的收藏\")])])])])],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/voice.png\")}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('span',[_c('img',{attrs:{\"src\":require(\"../../assets/image/ChatDesView/emote.png\")}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"new-group-chat-page\">\r\n    <h3>\r\n      <van-icon\r\n        name=\"arrow-left\"\r\n        color=\"rgb(107, 107, 107)\"\r\n        @click=\"routerGoBack\"\r\n      />\r\n      <span class=\"set\">\r\n        <span>{{ groupName }}</span>\r\n        <img\r\n          src=\"../../assets/image/more.png\"\r\n          @click=\"$router.push('/groupmessage')\"\r\n        />\r\n      </span>\r\n    </h3>\r\n    <p class=\"announcement\" v-if=\"isKnowAnnouncement\">\r\n      <span>{{ announcement }}</span>\r\n      <span @click=\"knowAnnouncement\">未读</span>\r\n    </p>\r\n    <main @click=\"handle\">\r\n      <div class=\"content\">\r\n        <p>{{ initCreateTime }}</p>\r\n        <p>你邀请了{{ promptWords }}加入了群聊</p>\r\n      </div>\r\n      <div class=\"messages\" v-show=\"textAllMessagesArr !== [] ? true : false\">\r\n        <div v-for=\"(item, index) in textAllMessagesArr\" :key=\"index\">\r\n          <div v-show=\"item.sendPeople == userId\" class=\"right\">\r\n            <img\r\n              v-show=\"item.sendPeopleImg !== undefined\"\r\n              :src=\"item.sendPeopleImg\"\r\n            />\r\n            <img\r\n              v-show=\"item.sendPeopleImg == undefined\"\r\n              src=\"../../assets/image/images/default_hd_avatar.png\"\r\n            />\r\n            <span>{{ item.text }}</span>\r\n          </div>\r\n          <div v-show=\"item.sendPeople !== userId\" class=\"left\">\r\n            <img\r\n              v-show=\"item.sendPeopleImg !== undefined\"\r\n              :src=\"item.sendPeopleImg\"\r\n            />\r\n            <img\r\n              v-show=\"item.sendPeopleImg == undefined\"\r\n              src=\"../../assets/image/images/default_hd_avatar.png\"\r\n            />\r\n            <span>{{ item.text }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n    <footer>\r\n      <div class=\"choose\">\r\n        <div class=\"left\">\r\n          <img src=\"../../assets/image/ChatDesView/voice.png\" />\r\n        </div>\r\n        <div class=\"container\">\r\n          <input v-model=\"inputValue\" type=\"text\" />\r\n        </div>\r\n        <div class=\"right\">\r\n          <span>\r\n            <img src=\"../../assets/image/ChatDesView/emote.png\" />\r\n          </span>\r\n          <span @click=\"handleClick\" v-if=\"!inputValue\">\r\n            <img src=\"../../assets/image/ChatDesView/more.png\" />\r\n          </span>\r\n          <button v-else @click=\"sendOneTextMessage\">发送</button>\r\n        </div>\r\n      </div>\r\n      <transition name=\"slide\">\r\n        <div class=\"list\" v-show=\"showFunctionList\">\r\n          <div class=\"item\">\r\n            <img src=\"../../assets/image/ChatDesView/photography.png\" />\r\n            <span>相册</span>\r\n          </div>\r\n          <div class=\"item\" @click=\"takePhoto\">\r\n            <img src=\"../../assets/image/ChatDesView/takephoto.png\" />\r\n            <span>拍摄</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <img src=\"../../assets/image/ChatDesView/phone.png\" />\r\n            <span>视频通话</span>\r\n          </div>\r\n          <div class=\"item\" @click=\"map\">\r\n            <img src=\"../../assets/image/ChatDesView/place.png\" />\r\n            <span>位置</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <img src=\"../../assets/image/ChatDesView/redpack.png\" />\r\n            <span>红包</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <img src=\"../../assets/image/ChatDesView/money.png\" />\r\n            <span>转账</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <img src=\"../../assets/image/ChatDesView/talk.png\" />\r\n            <span>语音输入</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <img src=\"../../assets/image/ChatDesView/collect.png\" />\r\n            <span>我的收藏</span>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport WebIM from \"../../utils/WebIM\";\r\nimport eventBus from \".././eventbus\";\r\nimport { mapState, mapMutations } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      groupName: \"\",\r\n      //   群组刚刚创建的时间\r\n      initCreateTime: \"\",\r\n      // 今天的时间\r\n      todayTime: new Date(),\r\n      //   新建群聊的提示语\r\n      promptWords: \"\",\r\n      //  键盘输入框\r\n      inputValue: \"\",\r\n      // 信息来往列表\r\n      textAllMessagesArr: [],\r\n      // 显示可操作功能列表\r\n      showFunctionList: false,\r\n      groupId: \"\",\r\n      // 发布新的公告\r\n      announcement: \"\",\r\n      // 是否显示群公告\r\n      isKnowAnnouncement: false,\r\n      activedKey: {\r\n        contact: \"\",\r\n        group: \"\",\r\n        chatroom: \"\",\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      newCreateGroupId: (state) => state.home.newCreateGroupId,\r\n      cacheClickGroupId: (state) => state.home.cacheClickGroupId,\r\n      userId: (state) => state.user.userId,\r\n      textMessagesArr: (state) => state.groupchat.textMessagesArr,\r\n      otherPeopleTextMessagesArr: (state) =>\r\n        state.groupchat.otherPeopleTextMessagesArr,\r\n      isUpdateGourpAnnouncement: (state) =>\r\n        state.home.isUpdateGourpAnnouncement,\r\n    }),\r\n  },\r\n  watch: {\r\n    userId() {\r\n      this.getGroupId();\r\n    },\r\n    isUpdateGourpAnnouncement(newV) {\r\n      if (newV) {\r\n        this.isKnowAnnouncement = JSON.parse(\r\n          sessionStorage.getItem(\"isUpdateGourpAnnouncement\")\r\n        );\r\n        if (this.isKnowAnnouncement == true) {\r\n          this.getAnnouncement();\r\n        }\r\n      }\r\n    },\r\n    textMessagesArr() {\r\n      this.getTextAllMessagesArr();\r\n    },\r\n    otherPeopleTextMessagesArr() {\r\n      this.getTextAllMessagesArr();\r\n    },\r\n  },\r\n  created() {\r\n    this.getGroupId();\r\n    eventBus.$on(\"location\", function (data) {}.bind(this));\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"setTextMessagesArr\"]),\r\n    // 获取群组ID\r\n    getGroupId() {\r\n      if (this.userId !== \"\") {\r\n        if (this.newCreateGroupId !== \"\") {\r\n          this.groupId = this.newCreateGroupId;\r\n        } else if (\r\n          this.newCreateGroupId == \"\" &&\r\n          this.cacheClickGroupId !== \"\"\r\n        ) {\r\n          this.groupId = this.cacheClickGroupId;\r\n        } else if (\r\n          this.newCreateGroupId == \"\" &&\r\n          this.cacheClickGroupId == \"\"\r\n        ) {\r\n          this.groupId = sessionStorage.getItem(\"groupInfoCacheSave\");\r\n        }\r\n        this.getGroupInfo();\r\n        this.getTextAllMessagesArr();\r\n        this.isKnowAnnouncement = JSON.parse(\r\n          sessionStorage.getItem(\"isUpdateGourpAnnouncement\")\r\n        );\r\n        if (this.isKnowAnnouncement == true) {\r\n          this.getAnnouncement();\r\n        }\r\n      }\r\n    },\r\n    // 获取群聊公告相关信息\r\n    getAnnouncement() {\r\n      let option = {\r\n        groupId: this.groupId,\r\n      };\r\n      WebIM.conn.fetchGroupAnnouncement(option).then((res) => {\r\n        this.announcement = res.data.announcement;\r\n      });\r\n    },\r\n    // 获取群聊的相关信息\r\n    getGroupInfo() {\r\n      // let id =\r\n      //   this.newCreateGroupId !== \"\"\r\n      //     ? this.newCreateGroupId\r\n      //     : sessionStorage.getItem(\"newCreateGroupId\");\r\n      let option = {\r\n        // 群组 ID\r\n        groupId: this.groupId,\r\n      };\r\n      //   获取群信息和创建时间加入的时间戳\r\n      WebIM.conn.getGroupInfo(option).then((res) => {\r\n        this.groupName = res.data[0].name;\r\n        let date = new Date(res.data[0].affiliations[0].joined_time);\r\n        let year = date.getFullYear();\r\n        let mounth = date.getMonth();\r\n        let day = date.getDate();\r\n        let nowYear = this.todayTime.getFullYear();\r\n        let nowMounth = this.todayTime.getMonth();\r\n        let nowDay = this.todayTime.getDate();\r\n        let hours =\r\n          date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours();\r\n        let minutes =\r\n          date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes();\r\n        if (year == nowYear && mounth == nowMounth && day == nowDay) {\r\n          this.initCreateTime = `${hours}:${minutes}`;\r\n        } else {\r\n          this.initCreateTime = `${mounth}月${day}日 ${hours}:${minutes}`;\r\n        }\r\n      });\r\n      //   获取群成员信息\r\n      let option1 = {\r\n        pageNum: 1,\r\n        pageSize: 200,\r\n        groupId: this.groupId,\r\n      };\r\n      WebIM.conn.listGroupMembers(option1).then((res) => {\r\n        let newArr = res.data.filter((item) => {\r\n          if (item.member) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n        newArr.map((item, i) => {\r\n          WebIM.conn.fetchUserInfoById(item.member).then((r) => {\r\n            if (i !== newArr.length - 1) {\r\n              this.promptWords += r.data[item.member].nickname + \"、\";\r\n            } else {\r\n              this.promptWords += r.data[item.member].nickname;\r\n            }\r\n          });\r\n        });\r\n      });\r\n    },\r\n    // 发送一条群聊会话\r\n    sendOneTextMessage() {\r\n      console.log(this.inputValue);\r\n      // 发送文本消息。\r\n      let option = {\r\n        // 设置消息类型。\r\n        type: \"txt\",\r\n        // 设置消息内容。\r\n        msg: this.inputValue,\r\n        // 设置消息接收方，单聊为对方用户 ID，群聊和聊天室分别为群组 ID 和聊天室 ID。\r\n        to: this.groupId,\r\n        // 设置会话类型，单聊、群聊和聊天室分别为 `singleChat`、`groupChat` 和 `chatRoom`，默认为单聊。\r\n        chatType: \"groupChat\",\r\n      };\r\n      // 创建文本消息。\r\n      let msg = WebIM.message.create(option);\r\n      // 调用 `send` 方法发送该文本消息。\r\n      WebIM.conn\r\n        .send(msg)\r\n        .then(() => {\r\n          let obj = {\r\n            text: this.inputValue,\r\n            time: new Date().getTime(),\r\n            sendPeople: this.userId,\r\n          };\r\n          this.setTextMessagesArr(obj);\r\n          console.log(\"Send message success\");\r\n        })\r\n        .catch((e) => {\r\n          console.log(\"Send message fail\");\r\n        });\r\n    },\r\n    // 获取群聊会话的相关信息\r\n    getTextAllMessagesArr() {\r\n      // textMessagesArr,otherPeopleTextMessagesArr,TextAllMessagesArr\r\n      let arr = [...this.textMessagesArr, ...this.otherPeopleTextMessagesArr];\r\n      // 按时间顺序排序\r\n      arr = this.geTimeSequenceArr(arr);\r\n      // console.log(arr);\r\n      arr.map((item) => {\r\n        WebIM.conn.fetchUserInfoById(item.sendPeople).then((res) => {\r\n          item.sendPeopleImg = res.data[item.sendPeople].avatarurl;\r\n        });\r\n      });\r\n      setTimeout(() => {\r\n        this.textAllMessagesArr = arr;\r\n      }, 500);\r\n    },\r\n    // 将会话信息按时间顺序排列\r\n    geTimeSequenceArr(arr) {\r\n      if (arr !== []) {\r\n        let temp = \"\";\r\n        for (let i = 0; i < arr.length - 1; i++) {\r\n          for (let j = 0; j < arr.length - i; j++) {\r\n            if (arr[j + 1] !== undefined) {\r\n              if (arr[j].time > arr[j + 1].time) {\r\n                temp = arr[j];\r\n                arr[j] = arr[j + 1];\r\n                arr[j + 1] = temp;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return arr\r\n      }\r\n    },\r\n    // 是否已读群聊公告\r\n    knowAnnouncement() {\r\n      let obj = {\r\n        updateGroupId: this.groupId,\r\n        boo: false,\r\n      };\r\n      this.isKnowAnnouncement = false;\r\n      this.$store.commit(\"setIsUpdateGourpAnnouncement\", obj);\r\n    },\r\n    // 跳转回原页面\r\n    routerGoBack() {\r\n      this.$router.push({\r\n        path: \"/\",\r\n      });\r\n    },\r\n    // 跳转到摄像拍摄页面\r\n    takePhoto() {\r\n      this.$router.push(\"/take\");\r\n    },\r\n    // 跳转到地图页面\r\n    map() {\r\n      this.$router.push(\"/map\");\r\n    },\r\n    // 群公告是否显示\r\n    handle() {\r\n      this.showFunctionList = false;\r\n    },\r\n    // 群公告按钮点击表示已读\r\n    handleClick() {\r\n      this.showFunctionList = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#new-group-chat-page {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  color: rgb(164, 164, 164);\r\n  background-color: var(--theme-background-black);\r\n  h3 {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n    height: 45px;\r\n    padding: 10px 10px 0 10px;\r\n    background-color: rgb(67 67 67);\r\n    .set {\r\n      width: 60%;\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      text-align: center;\r\n      color: #eee;\r\n      img {\r\n        width: 20px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .announcement {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n    height: 45px;\r\n    line-height: 45px;\r\n    padding: 5px 15px;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    background-color: rgb(67 67 67);\r\n    span {\r\n      &:last-child {\r\n        height: 30px;\r\n        line-height: 30px;\r\n        border-radius: 8px;\r\n        padding: 0px 8px;\r\n        background-color: #515151;\r\n      }\r\n    }\r\n  }\r\n  main {\r\n    width: 100%;\r\n    height: 88vh;\r\n    .content {\r\n      p {\r\n        padding-top: 10px;\r\n        text-align: center;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n    .messages {\r\n      .right {\r\n        overflow: hidden;\r\n        margin-top: 10px;\r\n        span {\r\n          position: relative;\r\n          float: right;\r\n          padding: 0 10px;\r\n          height: 40px;\r\n          line-height: 40px;\r\n          background-color: #05c160;\r\n          border-radius: 5px;\r\n          color: #fff;\r\n          &::after {\r\n            position: absolute;\r\n            right: -14px;\r\n            top: 13px;\r\n            content: \"\";\r\n            height: 0;\r\n            width: 0;\r\n            border-width: 7px 7px;\r\n            border-style: solid;\r\n            border-color: transparent transparent transparent #05c160;\r\n            display: inline-block;\r\n          }\r\n        }\r\n        img {\r\n          float: right;\r\n          width: 40px;\r\n          margin: 0 15px;\r\n          border-radius: 8px;\r\n        }\r\n      }\r\n      .left {\r\n        overflow: hidden;\r\n        margin-top: 10px;\r\n        span {\r\n          position: relative;\r\n          float: left;\r\n          padding: 0 10px;\r\n          height: 40px;\r\n          line-height: 40px;\r\n          background-color: #05c160;\r\n          border-radius: 5px;\r\n          color: #fff;\r\n          &::after {\r\n            position: absolute;\r\n            left: -14px;\r\n            top: 13px;\r\n            content: \"\";\r\n            height: 0;\r\n            width: 0;\r\n            border-width: 7px 7px;\r\n            border-style: solid;\r\n            border-color: transparent #05c160 transparent transparent;\r\n            display: inline-block;\r\n          }\r\n        }\r\n        img {\r\n          float: left;\r\n          width: 40px;\r\n          margin: 0 15px;\r\n          border-radius: 8px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  footer {\r\n    width: 100%;\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    text-align: center;\r\n    .choose {\r\n      display: flex;\r\n      width: 100%;\r\n      height: 45px;\r\n      background-color: #1e1e1e;\r\n      padding: 0 10px;\r\n\r\n      div {\r\n        margin: auto;\r\n      }\r\n\r\n      .left {\r\n        flex: 0 0 10%;\r\n\r\n        img {\r\n          width: 100%;\r\n        }\r\n      }\r\n\r\n      .container {\r\n        flex: 0 0 70%;\r\n        // border: 1px brown solid;\r\n\r\n        input {\r\n          width: 85%;\r\n          height: 29px;\r\n          overflow: hidden;\r\n          background-color: rgba(128, 128, 128, 0.445);\r\n          border: none;\r\n        }\r\n      }\r\n\r\n      .right {\r\n        flex: 0 0 20%;\r\n        display: flex;\r\n        span {\r\n          flex: 1;\r\n\r\n          img {\r\n            width: 100%;\r\n          }\r\n        }\r\n        button {\r\n          margin: 0 2px;\r\n          background-color: #05c160;\r\n          color: #fff;\r\n          font-size: 12px;\r\n          border: none;\r\n          border-radius: 5px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .list {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      position: relative;\r\n      width: 100%;\r\n      color: #fff;\r\n      background-color: #1e1e1e;\r\n\r\n      .item {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        width: 25%;\r\n        height: 80px;\r\n        // margin: auto;\r\n        text-align: center;\r\n        font-size: 12px;\r\n        box-sizing: border-box;\r\n        padding: 10px 0;\r\n\r\n        img {\r\n          width: 35px;\r\n        }\r\n        span {\r\n          margin-top: 10px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewGroupChatPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewGroupChatPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewGroupChatPage.vue?vue&type=template&id=4b67221f&scoped=true&\"\nimport script from \"./NewGroupChatPage.vue?vue&type=script&lang=js&\"\nexport * from \"./NewGroupChatPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewGroupChatPage.vue?vue&type=style&index=0&id=4b67221f&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b67221f\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","routerGoBack","staticClass","_v","_s","groupName","require","$event","$router","push","isKnowAnnouncement","announcement","knowAnnouncement","_e","handle","initCreateTime","promptWords","directives","name","rawName","value","textAllMessagesArr","expression","_l","item","index","key","sendPeople","userId","undefined","sendPeopleImg","text","_m","inputValue","domProps","target","composing","sendOneTextMessage","handleClick","showFunctionList","takePhoto","map","staticRenderFns","data","todayTime","groupId","activedKey","contact","group","chatroom","computed","newCreateGroupId","cacheClickGroupId","textMessagesArr","otherPeopleTextMessagesArr","state","isUpdateGourpAnnouncement","watch","sessionStorage","created","eventBus","methods","getGroupId","getAnnouncement","WebIM","getGroupInfo","date","pageNum","pageSize","newArr","console","type","msg","to","chatType","send","then","time","catch","getTextAllMessagesArr","arr","setTimeout","geTimeSequenceArr","temp","updateGroupId","boo","path","component"],"sourceRoot":""}