"use strict";(self["webpackChunkchat_demo"]=self["webpackChunkchat_demo"]||[]).push([[418],{84418:function(n,e,t){t.r(e),t.d(e,{default:function(){return h}});var o=function(){var n=this,e=n._self._c;return e("div",{attrs:{id:"change-group-announcement"}},[e("h3",[e("van-icon",{attrs:{name:"arrow-left",color:"rgb(107, 107, 107)"},on:{click:n.routerGoBack}}),e("span",[n._v("群公告")]),n.isWriterAnnouncement?n._e():e("span",{on:{click:n.setAnnouncement}},[n._v("编辑")]),n.isWriterAnnouncement?e("span",{staticClass:"button-writer",on:{click:n.accomplishAnnouncement}},[n._v("完成")]):n._e()],1),n.isWriterAnnouncement?n._e():e("div",{staticClass:"anno-info"},[n.isHaveAnnouncement?e("p",[n._v(n._s(n.AnnouncementConcent))]):n._e()]),n.isWriterAnnouncement?e("div",{staticClass:"announcement-concent"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.AnnouncementConcent,expression:"AnnouncementConcent"}],staticClass:"textarea",staticStyle:{"background-color":"var(--theme-background-black)"},domProps:{value:n.AnnouncementConcent},on:{input:function(e){e.target.composing||(n.AnnouncementConcent=e.target.value)}}})]):n._e()])},c=[],r=t(29146),u=t(63822),s={data(){return{AnnouncementConcent:"",groupId:"",isHaveAnnouncement:!1,isWriterAnnouncement:!1}},computed:{...(0,u.rn)({newCreateGroupId:n=>n.home.newCreateGroupId,cacheClickGroupId:n=>n.home.cacheClickGroupId,userId:n=>n.user.userId})},created(){this.getGroupId()},watch:{userId(){this.getGroupId()},isHaveAnnouncement(){},isWriterAnnouncement(){}},methods:{routerGoBack(){this.$router.go(-1)},getGroupId(){""!==this.userId&&(""!==this.newCreateGroupId?this.groupId=this.newCreateGroupId:""==this.newCreateGroupId&&""!==this.cacheClickGroupId?this.groupId=this.cacheClickGroupId:""==this.newCreateGroupId&&""==this.cacheClickGroupId&&(this.groupId=sessionStorage.getItem("groupInfoCacheSave")),this.getGroupAnnoInfo())},getGroupAnnoInfo(){let n={groupId:this.groupId};r.Z.conn.fetchGroupAnnouncement(n).then((n=>{""!==n.data.announcement&&(this.isHaveAnnouncement=!0)})),r.Z.conn.fetchGroupAnnouncement(n).then((n=>{this.AnnouncementConcent=n.data.announcement}))},setAnnouncement(){this.isWriterAnnouncement=!0},accomplishAnnouncement(){this.isWriterAnnouncement=!1;let n={groupId:this.groupId,announcement:this.AnnouncementConcent};console.log(this.AnnouncementConcent),r.Z.conn.updateGroupAnnouncement(n).then((n=>console.log(n,"123123")))}}},a=s,i=t(43736),m=(0,i.Z)(a,o,c,!1,null,"e6099a2e",null),h=m.exports}}]);
//# sourceMappingURL=418.e99e0b9b.js.map