"use strict";(self["webpackChunkchat_demo"]=self["webpackChunkchat_demo"]||[]).push([[838],{62838:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var i=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"add-user-in-group"}},[s("h3",[s("van-icon",{attrs:{name:"arrow-left",color:"rgb(107, 107, 107)"},on:{click:e.routerGoBack}}),s("span",[e._v("聊天成员("+e._s(e.friendsBasicList.length)+")")])],1),s("div",{staticClass:"concent-top"},[s("div",{staticClass:"search"},[s("van-icon",{staticClass:"search-icon",attrs:{name:"search"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"input",attrs:{type:"text",placeholder:"搜索"},domProps:{value:e.inputValue},on:{input:function(s){s.target.composing||(e.inputValue=s.target.value)}}})],1),s("div",{staticClass:"friend-list"},[s("van-checkbox-group",{attrs:{max:1,direction:"horizontal"},model:{value:e.selectBuildGroupFriends,callback:function(s){e.selectBuildGroupFriends=s},expression:"selectBuildGroupFriends"}},e._l(e.noInGrop,(function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.phone!==e.userId,expression:" item.phone!== userId"}],key:t.phone,staticClass:"friend-item"},[s("van-checkbox",{attrs:{name:t.phone},model:{value:e.checked,callback:function(s){e.checked=s},expression:"checked"}}),s("div",{staticClass:"img"},[s("img",{attrs:{src:e.showImg(t.avatarurl),alt:"head"}})]),s("div",{staticClass:"desc"},[s("span",[e._v(e._s(t.nickname||t.phone))])])],1)})),0)],1)]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showSureButton,expression:"showSureButton"}],staticClass:"button"},[s("button",{on:{click:e.isAdduserInGropu}},[e._v(" 删除("+e._s(e.selectBuildGroupFriends.length)+") ")])])])},n=[],r=(t(57658),t(29146)),o=t(63822),a={data(){return{inputValue:"",friendsBasicList:[],selectBuildGroupFriends:[],showSureButton:!1,checked:!0,isGroupMenber:[],isContactsMenber:[],showData:[],noInGrop:[],isGetFriendsBasicList:!1,isGetnoInGrop:!1,isGetAllData:!1,ownerId:""}},created(){this.userId&&(this.getFriendsBasicList(),this.isInGroup())},computed:{...(0,o.rn)({userId:e=>e.user.userId,newCreateGroupId:e=>e.home.newCreateGroupId,cacheClickGroupId:e=>e.home.cacheClickGroupId})},watch:{userId(){this.userId&&(this.getFriendsBasicList(),this.isInGroup())},isGetFriendsBasicList(){this.isGetFriendsBasicList&&this.isGetnoInGrop&&(this.isGetAllData=!0)},isGetnoInGrop(){this.isGetFriendsBasicList&&this.isGetnoInGrop&&(this.isGetAllData=!0)},isGetAllData(e){},selectBuildGroupFriends(e){0!==this.length?this.showSureButton=!0:this.showSureButton=!1}},methods:{routerGoBack(){this.$router.go(-1)},getFriendsBasicList(){r.Z.conn.getContacts(this.$store.state.user.userId).then((e=>{e.data.map(((s,t)=>{r.Z.conn.fetchUserInfoById(s).then((e=>{this.friendsBasicList.push(e.data[s]),this.isContactsMenber.push(e.data[s].nickname)})),t==e.data.length-1&&(this.isGetFriendsBasicList=!0)}))}))},showImg(e){return void 0!=e?e:t(10064)},isAdduserInGropu(){console.log(this.selectBuildGroupFriends,"hshdhf");let e=""!==this.cacheClickGroupId?this.cacheClickGroupId:sessionStorage.getItem("groupInfoCacheSave");r.Z.conn.removeGroupMember({groupId:e,username:this.selectBuildGroupFriends[0]}).then((e=>{console.log(e,90),this.$toast("删除成功")}))},isInGroup(){let e=""!==this.cacheClickGroupId?this.cacheClickGroupId:sessionStorage.getItem("groupInfoCacheSave"),s={pageNum:1,pageSize:200,groupId:e};r.Z.conn.listGroupMembers(s).then((e=>{let s=e.data;s.map(((e,t)=>{e.owner&&(this.ownerId=e.owner),r.Z.conn.fetchUserInfoById(e.owner??e.member).then((i=>{let n=i.data[e.owner??e.member].nickname;this.isGroupMenber.push(n),this.noInGrop.push(i.data[e.owner??e.member]),console.log(this.noInGrop,124115,this.userId),t==s.length-1&&(this.isGetnoInGrop=!0)}))}))}))}}},c=a,u=t(43736),d=(0,u.Z)(c,i,n,!1,null,"7dd32254",null),h=d.exports}}]);
//# sourceMappingURL=838.f7bbf275.js.map