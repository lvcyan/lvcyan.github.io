{"version":3,"file":"js/27.d4116a60.js","mappings":"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","sources":["webpack://chat-demo/./src/views/GroupAddition/AddUserInGroup.vue","webpack://chat-demo/src/views/GroupAddition/AddUserInGroup.vue","webpack://chat-demo/./src/views/GroupAddition/AddUserInGroup.vue?2e92","webpack://chat-demo/./src/views/GroupAddition/AddUserInGroup.vue?94dd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"add-user-in-group\"}},[_c('h3',[_c('van-icon',{attrs:{\"name\":\"arrow-left\",\"color\":\"rgb(107, 107, 107)\"},on:{\"click\":_vm.routerGoBack}}),_c('span',[_vm._v(\"选择联系人\")])],1),_c('div',{staticClass:\"concent-top\"},[_c('div',{staticClass:\"search\"},[_c('van-icon',{staticClass:\"search-icon\",attrs:{\"name\":\"search\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputValue),expression:\"inputValue\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"搜索\"},domProps:{\"value\":(_vm.inputValue)},on:{\"input\":function($event){if($event.target.composing)return;_vm.inputValue=$event.target.value}}})],1),_c('p',[_vm._v(\"企业联系人\")]),_c('div',{staticClass:\"friend-list\"},[_c('van-checkbox-group',{attrs:{\"direction\":\"horizontal\"},model:{value:(_vm.selectBuildGroupFriends),callback:function ($$v) {_vm.selectBuildGroupFriends=$$v},expression:\"selectBuildGroupFriends\"}},_vm._l((_vm.friendsBasicList),function(item,index){return _c('div',{key:item.phone,staticClass:\"friend-item\"},[_c('van-checkbox',{attrs:{\"name\":item.phone,\"disabled\":item == _vm.showData[index]},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}}),_c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":_vm.showImg(item.avatarurl),\"alt\":\"head\"}})]),_c('div',{staticClass:\"desc\"},[_c('span',[_vm._v(_vm._s(item.nickname || item.phone))])])],1)}),0)],1)]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSureButton),expression:\"showSureButton\"}],staticClass:\"button\"},[_c('button',{on:{\"click\":_vm.isAdduserInGropu}},[_vm._v(\" 完成(\"+_vm._s(_vm.selectBuildGroupFriends.length)+\") \")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"add-user-in-group\">\r\n    <h3>\r\n      <van-icon\r\n        name=\"arrow-left\"\r\n        color=\"rgb(107, 107, 107)\"\r\n        @click=\"routerGoBack\"\r\n      />\r\n      <span>选择联系人</span>\r\n    </h3>\r\n    <div class=\"concent-top\">\r\n      <div class=\"search\">\r\n        <van-icon name=\"search\" class=\"search-icon\" />\r\n        <!-- @input=\"onSearch\" -->\r\n        <input\r\n          class=\"input\"\r\n          v-model=\"inputValue\"\r\n          type=\"text\"\r\n          placeholder=\"搜索\"\r\n        />\r\n      </div>\r\n      <p>企业联系人</p>\r\n\r\n      <div class=\"friend-list\">\r\n        <van-checkbox-group\r\n          v-model=\"selectBuildGroupFriends\"\r\n          direction=\"horizontal\"\r\n        >\r\n          <div\r\n            v-for=\"(item,index) in friendsBasicList\"\r\n            :key=\"item.phone\"\r\n            class=\"friend-item\"\r\n          >\r\n            <van-checkbox :name=\"item.phone\" v-model=\"checked\" :disabled=\"item == showData[index]\" ></van-checkbox>\r\n            <!-- :disabled=\"isDisabled()\" -->\r\n            <div class=\"img\">\r\n              <img :src=\"showImg(item.avatarurl)\" alt=\"head\" />\r\n            </div>\r\n            <div class=\"desc\">\r\n              <span>{{ item.nickname || item.phone }}</span>\r\n            </div>\r\n          </div>\r\n        </van-checkbox-group>\r\n      </div>\r\n    </div>\r\n\r\n    <p class=\"button\" v-show=\"showSureButton\">\r\n      <button @click=\"isAdduserInGropu\">\r\n        完成({{ selectBuildGroupFriends.length }})\r\n      </button>\r\n    </p>\r\n  </div>\r\n</template>\r\n  \r\n  <script>\r\nimport WebIM from \"../../utils/WebIM\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      inputValue: \"\",\r\n      friendsBasicList: [],\r\n      selectBuildGroupFriends: [],\r\n      showSureButton: false,\r\n      checked: true,\r\n      isGroupMenber: [],\r\n      isContactsMenber: [],\r\n      showData: [],\r\n      noInGrop: [],\r\n      isGetFriendsBasicList: false,\r\n      isGetnoInGrop: false,\r\n      isGetAllData: false,\r\n    };\r\n  },\r\n  created() {\r\n    if (this.userId) {\r\n      this.getFriendsBasicList();\r\n      this.isInGroup();\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      userId: (state) => state.user.userId,\r\n\r\n      newCreateGroupId: (state) => state.home.newCreateGroupId,\r\n      // 群id\r\n      cacheClickGroupId: (state) => state.home.cacheClickGroupId,\r\n    }),\r\n  },\r\n  watch: {\r\n    userId() {\r\n      if (this.userId) {\r\n        this.getFriendsBasicList();\r\n        this.isInGroup();\r\n      }\r\n    },\r\n    // friendsBasicList(newV) {\r\n    //   if (newV.length == 1) {\r\n    //     this.isDisabled();\r\n    //   }\r\n    // // },\r\n\r\n    isGetFriendsBasicList() {\r\n      if (this.isGetFriendsBasicList && this.isGetnoInGrop) {\r\n        this.isGetAllData = true;\r\n      }\r\n    },\r\n    isGetnoInGrop() {\r\n      if (this.isGetFriendsBasicList && this.isGetnoInGrop) {\r\n        this.isGetAllData = true;\r\n      }\r\n    },\r\n    isGetAllData(newV) {\r\n      if (newV) {\r\n        this.isDisabled();\r\n      }\r\n    },\r\n    selectBuildGroupFriends(newV) {\r\n      if (this.length !== 0) {\r\n        this.showSureButton = true;\r\n      } else {\r\n        this.showSureButton = false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    routerGoBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    getFriendsBasicList() {\r\n      WebIM.conn.getContacts(this.$store.state.user.userId).then((res) => {\r\n        res.data.map((item, i) => {\r\n          WebIM.conn.fetchUserInfoById(item).then((obj) => {\r\n            this.friendsBasicList.push(obj.data[item]);\r\n            //获取练习人昵称\r\n            this.isContactsMenber.push(obj.data[item].nickname);\r\n            //  console.log(obj.data[item].nickname,1324536);\r\n          });\r\n          if (i == res.data.length - 1) {\r\n            this.isGetFriendsBasicList = true;\r\n          }\r\n        });\r\n        // console.log(this.friendsBasicList,'所有联系人信息');\r\n      });\r\n    },\r\n    showImg(img) {\r\n      if (img != undefined) {\r\n        return img;\r\n      } else {\r\n        return require(\"../../assets/image/addressImg/head.webp\");\r\n      }\r\n    },\r\n    // 邀人进群\r\n    isAdduserInGropu() {\r\n      let id =\r\n        this.cacheClickGroupId !== \"\"\r\n          ? this.cacheClickGroupId\r\n          : sessionStorage.getItem(\"groupInfoCacheSave\");\r\n\r\n      WebIM.conn\r\n        .inviteUsersToGroup({\r\n          groupId: id,\r\n          users: this.selectBuildGroupFriends,\r\n        })\r\n        .then((res) => {\r\n          console.log(res, 90);\r\n          this.$toast(\"邀请成功\");\r\n        })\r\n       \r\n\r\n      //  this.$router.push('/groupmessage')\r\n      //  this.$router.go(0)\r\n    },\r\n\r\n    //已经在群的人\r\n    isInGroup() {\r\n      let id =\r\n        this.cacheClickGroupId !== \"\"\r\n          ? this.cacheClickGroupId\r\n          : sessionStorage.getItem(\"groupInfoCacheSave\");\r\n      let option = {\r\n        pageNum: 1,\r\n        pageSize: 200,\r\n        groupId: id,\r\n      };\r\n      //获取群成员列表\r\n      WebIM.conn.listGroupMembers(option).then((res) => {\r\n        let newArr = res.data;\r\n        //  console.log(newArr,'群里的人');\r\n        newArr.map((item, index) => {\r\n          //  console.log(item.owner??item.member,index);\r\n          // 获取群成员信息\r\n          WebIM.conn\r\n            .fetchUserInfoById(item.owner ?? item.member)\r\n            .then((res) => {\r\n              //昵称\r\n              let name = res.data[item.owner ?? item.member].nickname;\r\n              this.isGroupMenber.push(name);\r\n              this.noInGrop.push(res.data[item.owner ?? item.member]);\r\n              // console.log(this.noInGrop);\r\n              if (index == newArr.length - 1) {\r\n                this.isGetnoInGrop = true;\r\n              }\r\n            });\r\n        });\r\n      });\r\n    },\r\n\r\n    isDisabled() {\r\n      this.friendsBasicList.map((item, i) => {\r\n        //  console.log(item.nickname,132345);   \r\n        this.noInGrop.map((item1) => {\r\n          // console.log(item1.nickname,13234588888);\r\n          if (item.nickname == item1.nickname) {\r\n                this.showData.push(item);\r\n              \r\n          }\r\n        });\r\n       });\r\n\r\n    },\r\n  },\r\n};\r\n</script>\r\n  \r\n  <style lang=\"scss\" scoped>\r\n#add-user-in-group {\r\n  position: relative;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  color: rgb(164, 164, 164);\r\n  z-index: 999;\r\n  background-color: var(--theme-background-black);\r\n  h3 {\r\n    background-color: rgb(67, 67, 67);\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    padding: 10px;\r\n    height: 45px;\r\n    span {\r\n      width: 58%;\r\n    }\r\n  }\r\n\r\n  .concent-top {\r\n    width: 100%;\r\n    .search {\r\n      width: 100%;\r\n      height: 50px;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: space-around;\r\n      align-items: center;\r\n      position: relative;\r\n      color: white;\r\n      padding: 5px 0;\r\n      background-color: rgb(41, 41, 41);\r\n      border-bottom: 1px solid var(--theme-cell-black);\r\n      .input {\r\n        width: 75%;\r\n        height: 80%;\r\n        background-color: #494545;\r\n        outline: none;\r\n        border: none;\r\n        text-indent: 30px;\r\n      }\r\n\r\n      .search-icon {\r\n        color: rgb(164, 164, 164);\r\n        position: absolute;\r\n        left: 12px;\r\n        top: 18px;\r\n        font-size: 18px;\r\n      }\r\n    }\r\n    p {\r\n      height: 45px;\r\n      line-height: 30px;\r\n      width: 100%;\r\n      padding: 8px;\r\n      background-color: rgb(41, 41, 41);\r\n      &:not(:last-child) {\r\n        border-bottom: 1px solid var(--theme-cell-black);\r\n      }\r\n    }\r\n    .friend-list {\r\n      margin-top: 15px;\r\n\r\n      .friend-item {\r\n        height: 45px;\r\n        line-height: 45px;\r\n        width: 100%;\r\n        background-color: rgb(24, 24, 24);\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        padding-left: 15px;\r\n        .van-checkbox {\r\n          padding-right: 10px;\r\n        }\r\n        .img {\r\n          width: 50px;\r\n          height: 40px;\r\n          border-radius: 5px;\r\n          margin-right: 15px;\r\n\r\n          img {\r\n            width: 100%;\r\n            height: 100%;\r\n            display: block;\r\n            border-radius: 3px;\r\n          }\r\n        }\r\n\r\n        .desc {\r\n          width: 90%;\r\n          border-bottom: 1px solid rgba(204, 203, 203, 0.1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .button {\r\n    position: absolute;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 60px;\r\n    padding: 10px;\r\n    text-align: right;\r\n    background-color: rgb(67, 67, 67);\r\n    button {\r\n      outline: 0px;\r\n      border: 0px;\r\n      padding: 8px 15px;\r\n      color: #fff;\r\n      border-radius: 5px;\r\n      background-color: var(--theme-green);\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AddUserInGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AddUserInGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddUserInGroup.vue?vue&type=template&id=7dc6fdd6&scoped=true&\"\nimport script from \"./AddUserInGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./AddUserInGroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddUserInGroup.vue?vue&type=style&index=0&id=7dc6fdd6&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7dc6fdd6\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","routerGoBack","_v","staticClass","directives","name","rawName","value","inputValue","expression","domProps","$event","target","composing","model","selectBuildGroupFriends","callback","$$v","_l","friendsBasicList","item","index","key","phone","showData","checked","showImg","avatarurl","_s","nickname","showSureButton","isAdduserInGropu","length","staticRenderFns","data","isGroupMenber","isContactsMenber","noInGrop","isGetFriendsBasicList","isGetnoInGrop","isGetAllData","created","computed","userId","newCreateGroupId","cacheClickGroupId","watch","methods","getFriendsBasicList","WebIM","res","sessionStorage","inviteUsersToGroup","groupId","users","then","console","isInGroup","pageNum","pageSize","newArr","fetchUserInfoById","isDisabled","component"],"sourceRoot":""}