"use strict";(self["webpackChunkchat_demo"]=self["webpackChunkchat_demo"]||[]).push([[413],{59413:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"build-group-chat-page"}},[e("h3",[e("van-icon",{attrs:{name:"arrow-left",color:"rgb(107, 107, 107)"},on:{click:t.routerGoBack}}),e("span",[t._v("发起群聊")])],1),e("div",{staticClass:"concent-top"},[e("div",{staticClass:"search"},[e("van-icon",{staticClass:"search-icon",attrs:{name:"search"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"input",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}})],1),e("p",[t._v("选择一个群")]),e("p",[t._v("面对面建群")]),e("p",[t._v("企业联系人")]),e("div",{staticClass:"friend-list"},[e("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:t.selectBuildGroupFriends,callback:function(e){t.selectBuildGroupFriends=e},expression:"selectBuildGroupFriends"}},t._l(t.friendsBasicList,(function(s){return e("div",{key:s.phone,staticClass:"friend-item"},[e("van-checkbox",{attrs:{name:s.phone}}),e("div",{staticClass:"img"},[e("img",{attrs:{src:t.showImg(s.avatarurl),alt:"head"}})]),e("div",{staticClass:"desc"},[e("span",[t._v(t._s(s.nickname||s.phone))])])],1)})),0)],1)]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.showSureButton,expression:"showSureButton"}],staticClass:"button"},[e("button",{on:{click:t.isBuildGroup}},[t._v(" 完成("+t._s(t.selectBuildGroupFriends.length)+") ")])])])},a=[],r=(s(57658),s(29146)),n=s(63822),o={data(){return{inputValue:"",friendsBasicList:[],selectBuildGroupFriends:[],showSureButton:!1}},created(){this.getFriendsBasicList()},computed:{...(0,n.rn)({userId:t=>t.user.userId})},watch:{selectBuildGroupFriends(t){0!==t.length?this.showSureButton=!0:this.showSureButton=!1}},methods:{routerGoBack(){this.$router.go(-1)},getFriendsBasicList(){r.Z.conn.getContacts(this.$store.state.user.userId).then((t=>{t.data.map((t=>{r.Z.conn.fetchUserInfoById(t).then((e=>{this.friendsBasicList.push(e.data[t])}))}))}))},showImg(t){return void 0!=t?t:s(10064)},isBuildGroup(){if(this.selectBuildGroupFriends.length>1){let t=[this.$store.state.user.userId,...this.selectBuildGroupFriends],e={data:{groupname:`群聊(${this.selectBuildGroupFriends.length+1})`,desc:"A description of a group",members:t,public:!0,approval:!1,allowinvites:!0,inviteNeedConfirm:!1,maxusers:500}};r.Z.conn.createGroup(e).then((t=>{let e={id:t.data.groupid,isNewCreate:!0};this.$store.commit("setNewCreateGroupId",e),sessionStorage.setItem("groupInfoCacheSave",t.data.groupid),this.$toast.success("建立群聊成功"),this.$router.push({path:"newgroupchatpage"})})).catch((t=>{this.$toast.fail("建立群聊失败")}))}else this.$toast.fail("建立群聊必须两人以上")}}},u=o,c=s(43736),l=(0,c.Z)(u,i,a,!1,null,"385affd0",null),d=l.exports}}]);
//# sourceMappingURL=413.4a867920.js.map